#!/usr/bin/env node

var args = require('minimist')(process.argv.slice(2), {
  'boolean': ['source-map'],
  'default': {
    'source-map': true
  }
});

var opts = {
  inline_source_map: !!args['source-map']
};

var compiler = require('../src');

var src = '';
process.stdin.on('data', function(data){
  src += data.toString();
});

process.stdin.on('end', function(){
  process.stdout.write(compiler(src, opts).code);
});
